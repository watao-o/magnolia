(function(){var e={7232:function(e,t,s){"use strict";var a=s(9242),i=s(3396),l=s(7718),n=s(3140);function o(e,t,s,a,o,r){const c=(0,i.up)("Magnolia");return(0,i.wg)(),(0,i.j4)(l.q,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n.O,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c)])),_:1})])),_:1})}var r=s(7139),c=s(702),d=s(3369),u=s(6824),f=s(8521),h=s(9159),g=s(8777),m=s(9671),p=s(5848);const k=e=>((0,i.dD)("data-v-d0c6ef10"),e=e(),(0,i.Cn)(),e),_={class:"custom-text"},v=k((()=>(0,i._)("span",{class:"custom-text"},"Player",-1))),I=k((()=>(0,i._)("span",{class:"custom-text"},"お金",-1))),b=k((()=>(0,i._)("span",{class:"custom-text"},"戦力",-1))),y=k((()=>(0,i._)("span",{class:"custom-text"},"技術点",-1))),C=k((()=>(0,i._)("span",{class:"custom-text"},"技術レベル",-1))),P=k((()=>(0,i._)("span",{class:"custom-text"},"信仰点",-1))),x=k((()=>(0,i._)("span",{class:"custom-text"},"信仰レベル",-1))),T=k((()=>(0,i._)("span",{class:"custom-text"},"VP",-1))),V={class:"custom-text"},w={class:"custom-text"},D={class:"custom-text"},E={class:"custom-text"},N={class:"custom-text"},W={class:"custom-text"},L={class:"custom-text"},j={class:"custom-text"},O=k((()=>(0,i._)("span",{class:"custom-text"},"プレイヤーカード置き場",-1))),R=k((()=>(0,i._)("span",{class:"custom-text"},"手札",-1))),F={class:"custom-text-snack"},A=k((()=>(0,i._)("span",{class:"custom-text"},"他プレイヤーの設置カード(comming soon...)",-1)));function H(e,t,s,a,l,n){const o=(0,i.up)("card-place"),k=(0,i.up)("hand-card"),H=(0,i.up)("phase-dialog"),Y=(0,i.up)("wait-dialog");return(0,i.wg)(),(0,i.j4)(d.K,{class:"mx-2 background-image max-dimensions",fluid:"",style:{"background-color":"#fef7da"}},{default:(0,i.w5)((()=>[(0,i.Wm)(u.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f.D,{cols:"2"},{default:(0,i.w5)((()=>[(0,i.Wm)(p.h,{modelValue:l.roomId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.roomId=e),dirty:"",flat:"",label:"ルームID",class:"custom-col"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(f.D,{cols:"2"},{default:(0,i.w5)((()=>[(0,i.Wm)(p.h,{modelValue:l.userName,"onUpdate:modelValue":t[1]||(t[1]=e=>l.userName=e),dirty:"",flat:"",label:"ユーザ名",readonly:l.joinRoom,class:"custom-col"},null,8,["modelValue","readonly"])])),_:1}),(0,i.Wm)(f.D,{cols:"1"},{default:(0,i.w5)((()=>[(0,i.Wm)(c.T,{onClick:n.createRoom,color:"black",disabled:l.joinRoom,class:"border"},{default:(0,i.w5)((()=>[(0,i.Uk)("部屋を作成する")])),_:1},8,["onClick","disabled"])])),_:1}),(0,i.Wm)(f.D,{cols:"1"},{default:(0,i.w5)((()=>[(0,i.Wm)(c.T,{onClick:n.enterRoom,color:"black",disabled:l.joinRoom,class:"border"},{default:(0,i.w5)((()=>[(0,i.Uk)("入室する")])),_:1},8,["onClick","disabled"])])),_:1}),(0,i.Wm)(f.D,null,{default:(0,i.w5)((()=>[(0,i._)("span",_,"参加人数: "+(0,r.zw)(l.playerNum),1)])),_:1})])),_:1}),(0,i.Wm)(u.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c.T,{color:"rgb(231, 177, 63)",onClick:n.gameStart,elevation:"20",height:"100",outlined:"",rounded:"","max-width":"500",disabled:!l.joinRoom||l.playGame},{default:(0,i.w5)((()=>[(0,i.Uk)("＜＜＜＜ゲームスタート＞＞＞＞")])),_:1},8,["onClick","disabled"])])),_:1}),(0,i.Wm)(u.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f.D,{cols:"2",class:"border custom-col"},{default:(0,i.w5)((()=>[v])),_:1}),(0,i.Wm)(f.D,{cols:"2",class:"border custom-col"},{default:(0,i.w5)((()=>[I])),_:1}),(0,i.Wm)(f.D,{cols:"2",class:"border custom-col"},{default:(0,i.w5)((()=>[b])),_:1}),(0,i.Wm)(f.D,{cols:"1",class:"border custom-col"},{default:(0,i.w5)((()=>[y])),_:1}),(0,i.Wm)(f.D,{cols:"1",class:"border custom-col"},{default:(0,i.w5)((()=>[C])),_:1}),(0,i.Wm)(f.D,{cols:"1",class:"border custom-col"},{default:(0,i.w5)((()=>[P])),_:1}),(0,i.Wm)(f.D,{cols:"1",class:"border custom-col"},{default:(0,i.w5)((()=>[x])),_:1}),(0,i.Wm)(f.D,{cols:"2",class:"border custom-col"},{default:(0,i.w5)((()=>[T])),_:1})])),_:1}),(0,i.Wm)(h.i,{class:"pa-0"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.room.users?l.room.users:[],((e,t)=>((0,i.wg)(),(0,i.j4)(g.l,{key:t,class:"pa-0",style:{"background-color":"cadetblue"}},{default:(0,i.w5)((()=>[(0,i.Wm)(u.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f.D,{cols:"2",class:"border;"},{default:(0,i.w5)((()=>[(0,i._)("span",V,(0,r.zw)(e.name),1)])),_:2},1024),(0,i.Wm)(f.D,{cols:"2",class:"border player-back"},{default:(0,i.w5)((()=>[(0,i._)("span",w,(0,r.zw)(e.status.money),1)])),_:2},1024),(0,i.Wm)(f.D,{cols:"2",class:"border player-back"},{default:(0,i.w5)((()=>[(0,i._)("span",D,(0,r.zw)(e.status.force),1)])),_:2},1024),(0,i.Wm)(f.D,{cols:"1",class:"border player-back"},{default:(0,i.w5)((()=>[(0,i._)("span",E,(0,r.zw)(e.status.tech)+" 点 ",1)])),_:2},1024),(0,i.Wm)(f.D,{cols:"1",class:"border player-back"},{default:(0,i.w5)((()=>[(0,i._)("span",N,(0,r.zw)(n._getLevel(e.status.tech)),1)])),_:2},1024),(0,i.Wm)(f.D,{cols:"1",class:"border player-back"},{default:(0,i.w5)((()=>[(0,i._)("span",W,(0,r.zw)(e.status.faith)+" 点 ",1)])),_:2},1024),(0,i.Wm)(f.D,{cols:"1",class:"border player-back"},{default:(0,i.w5)((()=>[(0,i._)("span",L,(0,r.zw)(n._getLevel(e.status.faith)),1)])),_:2},1024),(0,i.Wm)(f.D,{cols:"2",class:"border player-back"},{default:(0,i.w5)((()=>[(0,i._)("span",j,(0,r.zw)(e.status.vp),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,i.Wm)(u.o,{class:"pt-6"},{default:(0,i.w5)((()=>[(0,i.Wm)(f.D,{cols:"6",class:"custom-col border"},{default:(0,i.w5)((()=>[O])),_:1}),(0,i.Wm)(f.D,{cols:"6",class:"custom-col border"},{default:(0,i.w5)((()=>[R])),_:1})])),_:1}),(0,i.Wm)(m.v,{modelValue:l.snackbar,"onUpdate:modelValue":t[2]||(t[2]=e=>l.snackbar=e),timeout:3e3},{default:(0,i.w5)((()=>[(0,i._)("span",F,(0,r.zw)(l.message),1)])),_:1},8,["modelValue"]),(0,i.Wm)(u.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f.D,{cols:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{ref:"cardPlace",selectedCard:l.selectedCard,canvasName:"cardPlace",deckCards:l.deckCards,onRemoveHnadCard:t[3]||(t[3]=e=>n.removeHnadCard()),onEndPhase:t[4]||(t[4]=e=>n.endPhase()),onAddExistCardList:t[5]||(t[5]=e=>n.addExistCardList(e))},null,8,["selectedCard","deckCards"])])),_:1}),(0,i.Wm)(f.D,{cols:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(u.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(k,{ref:"handCard",deckCards:l.deckCards,onUpdateSelectedCard:t[6]||(t[6]=e=>n.updateSelectedCard(e)),onRemoveDeckCards:t[7]||(t[7]=e=>n.removeDeckCards(e)),selectedCard:l.selectedCard},null,8,["deckCards","selectedCard"])])),_:1}),(0,i.Wm)(u.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f.D,{cols:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(c.T,{color:l.trashFlg?"primary":"grey",onClick:t[8]||(t[8]=e=>n.trashCard()),disabled:!l.trashFlg,class:"border"},{default:(0,i.w5)((()=>[(0,i.Uk)("捨てるよ")])),_:1},8,["color","disabled"])])),_:1}),(0,i.Wm)(f.D,{cols:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(c.T,{color:l.trashFlg?"primary":"grey",onClick:t[9]||(t[9]=e=>n.endTrash()),disabled:!l.trashFlg,class:"border"},{default:(0,i.w5)((()=>[(0,i.Uk)("捨てるの終わったよ")])),_:1},8,["color","disabled"])])),_:1})])),_:1}),(0,i.Wm)(u.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c.T,{color:l.trashFlg||!l.playGame?"grey":"primary",onClick:n.endPhase,disabled:l.trashFlg||!l.playGame,class:"border"},{default:(0,i.w5)((()=>[(0,i.Uk)("ターン終了")])),_:1},8,["color","onClick","disabled"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(u.o,{class:"custom-col"},{default:(0,i.w5)((()=>[A])),_:1}),(0,i.Wm)(u.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f.D,{cols:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{ref:"otherCardPlace1",selectedCard:l.selectedCard,canvasName:"otherCardPlace1",onRemoveHnadCard:t[10]||(t[10]=e=>n.removeHnadCard()),onEndPhase:t[11]||(t[11]=e=>n.endPhase()),onAddExistCardList:t[12]||(t[12]=e=>n.addExistCardList(e))},null,8,["selectedCard"])])),_:1}),(0,i.Wm)(f.D,{cols:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{ref:"otherCardPlace2",selectedCard:l.selectedCard,canvasName:"otherCardPlace2",onRemoveHnadCard:t[13]||(t[13]=e=>n.removeHnadCard()),onEndPhase:t[14]||(t[14]=e=>n.endPhase()),onAddExistCardList:t[15]||(t[15]=e=>n.addExistCardList(e))},null,8,["selectedCard"])])),_:1})])),_:1}),(0,i.Wm)(u.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f.D,{cols:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{ref:"otherCardPlace3",selectedCard:l.selectedCard,canvasName:"otherCardPlace3",onRemoveHnadCard:t[16]||(t[16]=e=>n.removeHnadCard()),onEndPhase:t[17]||(t[17]=e=>n.endPhase()),onAddExistCardList:t[18]||(t[18]=e=>n.addExistCardList(e))},null,8,["selectedCard"])])),_:1}),(0,i.Wm)(f.D,{cols:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{ref:"otherCardPlace4",selectedCard:l.selectedCard,canvasName:"otherCardPlace4",onRemoveHnadCard:t[19]||(t[19]=e=>n.removeHnadCard()),onEndPhase:t[20]||(t[20]=e=>n.endPhase()),onAddExistCardList:t[21]||(t[21]=e=>n.addExistCardList(e))},null,8,["selectedCard"])])),_:1})])),_:1}),(0,i.Wm)(H,{ref:"announceDialog",nextPhase:()=>{},onCloseDialog:t[22]||(t[22]=e=>n.closeDialog())},null,512),(0,i.Wm)(H,{ref:"startDialog",nextPhase:n.putPhase,onCloseDialog:t[23]||(t[23]=e=>n.closeDialog())},null,8,["nextPhase"]),(0,i.Wm)(H,{ref:"putPhaseDialog",nextPhase:()=>{},onCloseDialog:t[24]||(t[24]=e=>n.closeDialog())},null,512),(0,i.Wm)(H,{ref:"warPhaseDialog",nextPhase:n.developPhase,onCloseDialog:t[25]||(t[25]=e=>n.closeDialog())},null,8,["nextPhase"]),(0,i.Wm)(H,{ref:"developPhaseDialog",nextPhase:n.incomePhase,onCloseDialog:t[26]||(t[26]=e=>n.closeDialog())},null,8,["nextPhase"]),(0,i.Wm)(H,{ref:"incomePhaseDialog",nextPhase:n.vpPhase,onCloseDialog:t[27]||(t[27]=e=>n.closeDialog())},null,8,["nextPhase"]),(0,i.Wm)(H,{ref:"vpPhaseDialog",nextPhase:n.putPhase,onCloseDialog:t[28]||(t[28]=e=>n.closeDialog())},null,8,["nextPhase"]),(0,i.Wm)(Y,{ref:"waitDialog"},null,512)])),_:1})}s(7658);const Y={class:"",style:{width:"600px"}},z=["id"];function X(e,t,s,a,l,n){return(0,i.wg)(),(0,i.j4)(d.K,null,{default:(0,i.w5)((()=>[(0,i._)("div",Y,[(0,i._)("canvas",{id:s.canvasName,class:"border"},null,8,z)])])),_:1})}var M=s(7968);const S={CONFIG:"01",WAR:"02",AFTER_WAR:"03",DEVELOP:"04",INCOM:"05",VP:"06",END:"07"},U={MONEY:"01",TECH:"02",FAITH:"03",WAR:"04",VP:"05",SPECIAL1:"06",SPECIAL2:"07",SPECIAL3:"08",GET_WAR_VP:"09",NOT_GET_WAR_VP:"10"},$={HUMAN:"01",DOWARF:"02",ELF:"03",GOBLIN:"04",GOLEM:"05",DEMON:"06",TECH_LEVEL:"07",FAITH_LEVEL:"08",JOB_KIND:"09",UNDER_3_COST:"10",UPPER_4_COST:"11",UPPER_4_FORCE:"12"},B=[{player:1,result:[{rank:1,vp:3}]},{player:2,result:[{rank:1,vp:4},{rank:2,vp:0}]},{player:3,result:[{rank:1,vp:5},{rank:2,vp:3},{rank:3,vp:0}]},{player:4,result:[{rank:1,vp:5},{rank:2,vp:3},{rank:3,vp:0},{rank:4,vp:0}]},{player:5,result:[{rank:1,vp:5},{rank:2,vp:3},{rank:3,vp:1},{rank:4,vp:0},{rank:5,vp:0}]}],G={KIND:"01",JOB:"02"},J={X:150,Y:210},K="unit_0017";var Z={name:"cardPlace",props:{selectedCard:{type:Object},cardImgList:{type:Array},canvasName:{type:String,require:!0}},data(){return{canvaz:null,installCount:0,maxPos:{x:4,y:4},minPos:{x:0,y:0}}},mounted(){this.init()},methods:{init(){this.canvaz=new M.fabric.Canvas(this.canvasName),this.canvaz.setWidth(5*J.X),this.canvaz.setHeight(5*J.Y),this.canvaz.selectable=!1;const e=5,t=5;for(let s=0;s<e;s++)for(let e=0;e<t;e++){const t=new M.fabric.Rect({left:s*J.X,top:e*J.Y,width:J.X,height:J.Y,fill:"#2222",stroke:"brack",strokeWidth:1,selectable:!1,posX:s,posY:e});this.canvaz.add(t),this.setClickEvent(t)}},setClickEvent(e){e.on("mousedown",(()=>{if(e.Installable){M.fabric.Image.fromURL(this.selectedCard.img,(t=>{var s=t.set({left:this._approximateNumber(e.left,J.X),top:this._approximateNumber(e.top,J.Y)});s.scaleToWidth(J.X),s.selectable=!1,s.id="card",s.posX=e.left/J.X,s.posY=e.top/J.Y,this.chkMaxPos(s.posX,s.posY),this.canvaz.add(s)})),this.installCount++,this.$emit("removeHnadCard");const t={...this.selectedCard,posX:e.left/J.X,posY:e.top/J.Y};this.$emit("addExistCardList",t),this._disHighLight()}}))},chkMaxPos(e,t){const s=this._getImgObjList(),a=s.map((e=>e.posX));a.push(e);const i=Math.max(...a),l=Math.min(...a);i-l>=2&&(this.maxPos.x=i,this.minPos.x=l);const n=s.map((e=>e.posY));n.push(t);const o=Math.max(...n),r=Math.min(...n);o-r>=2&&(this.maxPos.y=o,this.minPos.y=r)},highlight(){const e=this._getImgObjList();if(0===e.length){const e=this.canvaz.getObjects().filter((e=>"rect"===e.type)).find((e=>2===e.posX&&2===e.posY));e.set({fill:this._getHighlightFill()}),e.Installable=!0,this.canvaz.renderAll()}e.forEach((t=>{this._getNextCard(t,e)}))},_getNextCard(e,t){const s=e.aCoords,[a,i,l,n]=[this._approximateNumber(s.tl.x,J.X),this._approximateNumber(s.tl.y,J.Y),this._approximateNumber(s.br.x,J.X),this._approximateNumber(s.br.y,J.Y)],o=this.canvaz.getObjects().filter((e=>"rect"===e.type));o.forEach((s=>{const o=t.filter((t=>t.posX===e.posX)).length,r=t.filter((t=>t.posY===e.posY)).length,c=s.aCoords,[d,u,f,h]=[this._approximateNumber(c.tl.x,J.X),this._approximateNumber(c.tl.y,J.Y),this._approximateNumber(c.br.x,J.X),this._approximateNumber(c.br.y,J.Y)],g=a===d&&i===h&&o<3,m=i===u&&a===f&&r<3,p=i===u&&l===d&&r<3,k=a===d&&n===u&&o<3;(g||m||p||k)&&(s.posX<this.minPos.x||this.maxPos.x<s.posX||s.posY<this.minPos.y||this.maxPos.y<s.posY||(s.set({fill:this._getHighlightFill()}),s.Installable=!0))})),this.canvaz.renderAll()},_approximateNumber(e,t){return Math.round(e/t)*t},_getHighlightFill(){return new M.fabric.Gradient({type:"linear",coords:{x1:0,y1:0,x2:0,y2:J.Y},colorStops:[{offset:0,color:"blue"},{offset:1,color:"white"}]})},_disHighLight(){const e=this.canvaz.getObjects().filter((e=>"rect"===e.type));e.forEach((e=>{e.Installable=!1,e.set({fill:"#2222"})})),this.installCount>=2&&(this.installCount=0,this.$emit("endPhase"))},getRandomInt(e){return Math.floor(Math.random()*(e+1))},_getImgObjList(){return this.canvaz.getObjects().filter((e=>"image"===e.type))}}},q=s(89);const Q=(0,q.Z)(Z,[["render",X]]);var ee=Q;const te=(0,i._)("div",{class:"",style:{width:"600px"}},[(0,i._)("canvas",{id:"handCanvas",class:"border"})],-1);function se(e,t,s,a,l,n){return(0,i.wg)(),(0,i.j4)(d.K,null,{default:(0,i.w5)((()=>[te])),_:1})}var ae=s(4806),ie=s.n(ae),le={name:"handCard",props:{selectedCard:{type:Object},deckCards:{type:Object}},data(){return{canvaz:null}},mounted(){this.init()},methods:{init(){this.canvaz=new M.fabric.Canvas("handCanvas"),this.canvaz.setWidth(5*J.X),this.canvaz.setHeight(2*J.Y);const e=5,t=2;for(let s=0;s<e;s++)for(let e=0;e<t;e++){const t=new M.fabric.Rect({left:s*J.X,top:e*J.Y,width:J.X,height:J.Y,fill:"#2222",stroke:"brack",strokeWidth:1,selectable:!1});this.canvaz.add(t)}},_drawCard(){const e=5,t=2,s=[];for(let a=0;a<e;a++)for(let e=1;e<t;e++){const t=this.deckCards[this.getRandomInt(this.deckCards.length-1)];s.push(t),M.fabric.Image.fromURL(t.img,(s=>{var i=s.set({left:J.X*a,top:J.Y*e});i.scaleToWidth(J.X),i.selectable=!1,i.imgData=t,this.canvaz.add(i),this._setCardEvent(i)}))}this.$emit("removeDeckCards",s)},_setCardEvent(e){e.on("mousedown",(()=>{const t=this.canvaz.getObjects(),s=t.filter((e=>"image"===e.type)),a=s.find((e=>0===e.top));e.top===J.Y&&(ie().isEmpty(a)||(a.top=J.Y),e.top-=J.Y,this.$emit("updateSelectedCard",e.imgData))}))},removeHnadCard(){const e=this.canvaz.getObjects().filter((e=>"image"===e.type)).find((e=>0===e.top));this.canvaz.remove(e)},reloadCard(){console.log("手札補充処理");const e=5,t=2;for(let s=0;s<e;s++)for(let e=1;e<t;e++){const t=this.deckCards[this.getRandomInt(this.deckCards.length-1)];M.fabric.Image.fromURL(t.img,(a=>{const i=this.canvaz.getObjects().filter((e=>"image"===e.type));if(!i.find((e=>e.left===J.X*s))){this.$emit("removeDeckCards",[t]);var l=a.set({left:J.X*s,top:J.Y*e});l.scaleToWidth(J.X),l.selectable=!1,l.imgData=t,this.canvaz.add(l),this._setCardEvent(l)}}))}},getRandomInt(e){return Math.floor(Math.random()*(e+1))}}};const ne=(0,q.Z)(le,[["render",se]]);var oe=ne,re=s(5039),ce=s(1888),de=s(1334),ue=s(4009);const fe={class:"custom-text"};function he(e,t,s,a,l,n){return(0,i.wg)(),(0,i.j4)(ue.B,{modelValue:l.showFlg,"onUpdate:modelValue":t[0]||(t[0]=e=>l.showFlg=e),width:"auto",light:!0,persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(re._,null,{default:(0,i.w5)((()=>[(0,i.Wm)(ce.Z,null,{default:(0,i.w5)((()=>[(0,i._)("span",fe,(0,r.zw)(l.dialogMsg),1)])),_:1}),(0,i.Wm)(de.h)])),_:1})])),_:1},8,["modelValue"])}var ge={name:"phaseDialog",props:{nextPhase:{type:Function,required:!0}},data(){return{showFlg:!1,dialogMsg:"ターン終了します"}},methods:{openDialog(e){this.dialogMsg=e,this.showFlg=!0,setTimeout((()=>{this.showFlg&&(this.showFlg=!1),this.nextPhase()}),1500)}}};const me=(0,q.Z)(ge,[["render",he],["__scopeId","data-v-26a06cf2"]]);var pe=me;function ke(e,t,s,a,l,n){return(0,i.wg)(),(0,i.j4)(ue.B,{modelValue:l.showFlg,"onUpdate:modelValue":t[0]||(t[0]=e=>l.showFlg=e),width:"auto",light:!0,persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(re._,null,{default:(0,i.w5)((()=>[(0,i.Wm)(ce.Z,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(l.dialogMsg),1)])),_:1}),(0,i.Wm)(de.h)])),_:1})])),_:1},8,["modelValue"])}var _e={name:"waitDialog",props:{},data(){return{showFlg:!1,dialogMsg:"他のプレーヤの処理を待っています。"}},methods:{openDialog(){this.showFlg=!0},closeDialog(){this.showFlg=!1}}};const ve=(0,q.Z)(_e,[["render",ke]]);var Ie=ve,be=JSON.parse('{"unitList":[{"unitId":"unit_0001","cardNum":3,"kind":"01","job":"01","cost":3,"name":"人間の騎士","force":6,"skillId1":"skill_0021","skillId2":""},{"unitId":"unit_0002","cardNum":3,"kind":"01","job":"02","cost":1,"name":"人間の行商","force":3,"skillId1":"skill_0027","skillId2":""},{"unitId":"unit_0003","cardNum":3,"kind":"01","job":"03","cost":5,"name":"人間の大工","force":2,"skillId1":"skill_0002","skillId2":"skill_0030"},{"unitId":"unit_0004","cardNum":3,"kind":"01","job":"04","cost":3,"name":"人間の呪い師","force":4,"skillId1":"skill_0003","skillId2":"skill_0017"},{"unitId":"unit_0005","cardNum":3,"kind":"01","job":"05","cost":3,"name":"人間の聖職者","force":2,"skillId1":"skill_0026","skillId2":"skill_0032"},{"unitId":"unit_0006","cardNum":2,"kind":"01","job":"02","cost":2,"name":"人間の大商人","force":2,"skillId1":"skill_0029","skillId2":""},{"unitId":"unit_0007","cardNum":2,"kind":"01","job":"03","cost":3,"name":"人間の葬儀屋","force":2,"skillId1":"skill_0002","skillId2":"skill_0024"},{"unitId":"unit_0008","cardNum":1,"kind":"01","job":"06","cost":6,"name":"人間の君主","force":6,"skillId1":"skill_0004","skillId2":"skill_0040"},{"unitId":"unit_0009","cardNum":3,"kind":"02","job":"01","cost":2,"name":"ドワーフの拳闘士","force":5,"skillId1":"skill_0002","skillId2":""},{"unitId":"unit_0010","cardNum":3,"kind":"02","job":"02","cost":3,"name":"ドワーフの鉱石屋","force":4,"skillId1":"skill_0002","skillId2":"skill_0028"},{"unitId":"unit_0011","cardNum":3,"kind":"02","job":"03","cost":2,"name":"ドワーフの料理人","force":1,"skillId1":"skill_0025","skillId2":"skill_0031"},{"unitId":"unit_0012","cardNum":3,"kind":"02","job":"04","cost":2,"name":"ドワーフの錬金術師","force":2,"skillId1":"skill_0018","skillId2":"skill_0027"},{"unitId":"unit_0013","cardNum":3,"kind":"02","job":"05","cost":4,"name":"ドワーフの神官","force":6,"skillId1":"skill_0025","skillId2":"skill_0026"},{"unitId":"unit_0014","cardNum":2,"kind":"02","job":"03","cost":6,"name":"ドワーフのビール職人","force":2,"skillId1":"skill_0038","skillId2":""},{"unitId":"unit_0015","cardNum":2,"kind":"02","job":"05","cost":4,"name":"ドワーフの聖堂守り","force":5,"skillId1":"skill_0027","skillId2":"skill_0034"},{"unitId":"unit_0016","cardNum":1,"kind":"02","job":"06","cost":7,"name":"ドワーフの王","force":7,"skillId1":"skill_0012","skillId2":"skill_0005"},{"unitId":"unit_0017","cardNum":3,"kind":"03","job":"01","cost":2,"name":"エルフの射手","force":3,"skillId1":"skill_0020","skillId2":""},{"unitId":"unit_0018","cardNum":3,"kind":"03","job":"02","cost":1,"name":"エルフの交易人","force":2,"skillId1":"skill_0003","skillId2":"skill_0027"},{"unitId":"unit_0019","cardNum":3,"kind":"03","job":"03","cost":3,"name":"エルフの芸術家","force":1,"skillId1":"skill_0036","skillId2":""},{"unitId":"unit_0020","cardNum":3,"kind":"03","job":"04","cost":2,"name":"エルフの神秘家","force":2,"skillId1":"skill_0003","skillId2":"skill_0018"},{"unitId":"unit_0021","cardNum":3,"kind":"03","job":"04","cost":1,"name":"エルフの祈り手","force":2,"skillId1":"skill_0010","skillId2":"skill_0026"},{"unitId":"unit_0022","cardNum":2,"kind":"03","job":"04","cost":6,"name":"エルフの魔術師","force":3,"skillId1":"skill_0019","skillId2":"skill_0022"},{"unitId":"unit_0023","cardNum":2,"kind":"03","job":"05","cost":3,"name":"エルフの信奉者","force":3,"skillId1":"skill_0011","skillId2":"skill_0032"},{"unitId":"unit_0024","cardNum":1,"kind":"03","job":"06","cost":7,"name":"エルフの女王","force":7,"skillId1":"skill_0013","skillId2":"skill_0006"},{"unitId":"unit_0025","cardNum":3,"kind":"04","job":"01","cost":1,"name":"ゴブリンの兵士","force":4,"skillId1":"skill_0021","skillId2":""},{"unitId":"unit_0026","cardNum":3,"kind":"04","job":"02","cost":2,"name":"ゴブリンのゴミ売り","force":3,"skillId1":"skill_0021","skillId2":"skill_0027"},{"unitId":"unit_0027","cardNum":3,"kind":"04","job":"03","cost":2,"name":"ゴブリンのガラクタ集め","force":4,"skillId1":"skill_0002","skillId2":"skill_0021"},{"unitId":"unit_0028","cardNum":3,"kind":"04","job":"04","cost":1,"name":"ゴブリンの祈祷師","force":3,"skillId1":"skill_0003","skillId2":"skill_0017"},{"unitId":"unit_0029","cardNum":3,"kind":"04","job":"05","cost":2,"name":"ゴブリンの錯乱者","force":2,"skillId1":"skill_0003","skillId2":"skill_0032"},{"unitId":"unit_0030","cardNum":2,"kind":"04","job":"01","cost":2,"name":"ゴブリンの百人長","force":5,"skillId1":"skill_0021","skillId2":""},{"unitId":"unit_0031","cardNum":2,"kind":"04","job":"04","cost":4,"name":"ゴブリンの戦術家","force":4,"skillId1":"skill_0035","skillId2":""},{"unitId":"unit_0032","cardNum":1,"kind":"04","job":"06","cost":8,"name":"ゴブリンの族長","force":2,"skillId1":"skill_0007","skillId2":"skill_0033"},{"unitId":"unit_0033","cardNum":3,"kind":"05","job":"01","cost":2,"name":"鉄のゴーレム","force":4,"skillId1":"skill_0016","skillId2":"skill_0017"},{"unitId":"unit_0034","cardNum":3,"kind":"05","job":"02","cost":2,"name":"黄金のゴーレム","force":4,"skillId1":"skill_0015","skillId2":""},{"unitId":"unit_0035","cardNum":3,"kind":"05","job":"04","cost":5,"name":"（笑）のゴーレム","force":4,"skillId1":"skill_0018","skillId2":"skill_0030"},{"unitId":"unit_0036","cardNum":2,"kind":"05","job":"05","cost":6,"name":"水晶のゴーレム","force":1,"skillId1":"skill_0036","skillId2":"skill_0037"},{"unitId":"unit_0037","cardNum":1,"kind":"05","job":"06","cost":6,"name":"ゴーレムの王","force":8,"skillId1":"skill_0001","skillId2":"skill_0008"},{"unitId":"unit_0038","cardNum":3,"kind":"06","job":"01","cost":5,"name":"破壊のデーモン","force":8,"skillId1":"skill_0021","skillId2":""},{"unitId":"unit_0039","cardNum":3,"kind":"06","job":"02","cost":5,"name":"眼のデーモン","force":6,"skillId1":"skill_0029","skillId2":""},{"unitId":"unit_0040","cardNum":3,"kind":"06","job":"03","cost":5,"name":"疫病のデーモン","force":4,"skillId1":"skill_0039","skillId2":""},{"unitId":"unit_0041","cardNum":1,"kind":"06","job":"06","cost":9,"name":"嵐のデーモン","force":13,"skillId1":"skill_0009","skillId2":"skill_0014"}],"skillList":[{"skillId":"skill_0001","activePhase":"01","effectTarget":"06","effectValue":null,"synergyTarget":"","explanation":"[技術]技術点と[信仰]信仰点の値を高い方に合わせる"},{"skillId":"skill_0002","activePhase":"01","effectTarget":"02","effectValue":1,"synergyTarget":"","explanation":"1[技術]技術点"},{"skillId":"skill_0003","activePhase":"01","effectTarget":"03","effectValue":1,"synergyTarget":"","explanation":"1[信仰]信仰点"},{"skillId":"skill_0004","activePhase":"01","effectTarget":"05","effectValue":1,"synergyTarget":"01","explanation":"1VP × 人間"},{"skillId":"skill_0005","activePhase":"01","effectTarget":"05","effectValue":1,"synergyTarget":"02","explanation":"1VP × ドワーフ"},{"skillId":"skill_0006","activePhase":"01","effectTarget":"05","effectValue":1,"synergyTarget":"03","explanation":"1VP × エルフ"},{"skillId":"skill_0007","activePhase":"01","effectTarget":"05","effectValue":1,"synergyTarget":"04","explanation":"1VP × ゴブリン"},{"skillId":"skill_0008","activePhase":"01","effectTarget":"05","effectValue":1,"synergyTarget":"05","explanation":"1VP × ゴーレム"},{"skillId":"skill_0009","activePhase":"01","effectTarget":"05","effectValue":1,"synergyTarget":"06","explanation":"1VP × デーモン"},{"skillId":"skill_0010","activePhase":"01","effectTarget":"05","effectValue":1,"synergyTarget":"08","explanation":"1VP × [信仰]信仰レベル"},{"skillId":"skill_0011","activePhase":"01","effectTarget":"03","effectValue":2,"synergyTarget":"","explanation":"2[信仰]信仰点"},{"skillId":"skill_0012","activePhase":"01","effectTarget":"02","effectValue":5,"synergyTarget":"","explanation":"5[技術]技術点"},{"skillId":"skill_0013","activePhase":"01","effectTarget":"03","effectValue":5,"synergyTarget":"","explanation":"5[信仰]信仰点"},{"skillId":"skill_0014","activePhase":"01","effectTarget":"07","effectValue":null,"synergyTarget":"","explanation":"自分が受け取るボーナスを2倍にする"},{"skillId":"skill_0015","activePhase":"01","effectTarget":"01","effectValue":1,"synergyTarget":"10","explanation":"1金 × [職業]職業の種類"},{"skillId":"skill_0016","activePhase":"02","effectTarget":"04","effectValue":1,"synergyTarget":"07","explanation":"1戦力 × [技術]技術レベル"},{"skillId":"skill_0017","activePhase":"02","effectTarget":"04","effectValue":1,"synergyTarget":"08","explanation":"1戦力 × [信仰]信仰レベル"},{"skillId":"skill_0018","activePhase":"02","effectTarget":"04","effectValue":2,"synergyTarget":"08","explanation":"2戦力 × [信仰]信仰レベル"},{"skillId":"skill_0019","activePhase":"02","effectTarget":"04","effectValue":3,"synergyTarget":"08","explanation":"3戦力 × [信仰]信仰レベル"},{"skillId":"skill_0020","activePhase":"02","effectTarget":"08","effectValue":null,"synergyTarget":"","explanation":"前線でなくても戦争に参加する"},{"skillId":"skill_0021","activePhase":"03","effectTarget":"09","effectValue":1,"synergyTarget":"","explanation":"戦争でVPを得たなら、追加で1VP"},{"skillId":"skill_0022","activePhase":"03","effectTarget":"09","effectValue":1,"synergyTarget":"08","explanation":"戦争でVPを得たなら、追加で1VP × [信仰]信仰レベル"},{"skillId":"skill_0023","activePhase":"03","effectTarget":"09","effectValue":2,"synergyTarget":"","explanation":"戦争でVPを得たなら、追加で2VP"},{"skillId":"skill_0024","activePhase":"03","effectTarget":"10","effectValue":2,"synergyTarget":"","explanation":"戦争でVPを得なかったなら、2VP"},{"skillId":"skill_0025","activePhase":"04","effectTarget":"02","effectValue":1,"synergyTarget":"","explanation":"1[技術]技術点"},{"skillId":"skill_0026","activePhase":"04","effectTarget":"03","effectValue":1,"synergyTarget":"","explanation":"1[信仰]信仰点"},{"skillId":"skill_0027","activePhase":"05","effectTarget":"01","effectValue":1,"synergyTarget":"","explanation":"1金"},{"skillId":"skill_0028","activePhase":"05","effectTarget":"01","effectValue":1,"synergyTarget":"07","explanation":"1金 × [技術]技術レベル"},{"skillId":"skill_0029","activePhase":"05","effectTarget":"01","effectValue":2,"synergyTarget":"","explanation":"2金"},{"skillId":"skill_0030","activePhase":"05","effectTarget":"01","effectValue":2,"synergyTarget":"07","explanation":"2金 × [技術]技術レベル"},{"skillId":"skill_0031","activePhase":"06","effectTarget":"05","effectValue":1,"synergyTarget":"07","explanation":"1VP × [技術]技術レベル"},{"skillId":"skill_0032","activePhase":"06","effectTarget":"05","effectValue":1,"synergyTarget":"08","explanation":"1VP × [信仰]信仰レベル"},{"skillId":"skill_0033","activePhase":"06","effectTarget":"05","effectValue":1,"synergyTarget":"11","explanation":"1VP × コスト3以下のユニット"},{"skillId":"skill_0034","activePhase":"06","effectTarget":"05","effectValue":1,"synergyTarget":"12","explanation":"1VP × コスト4以上のユニット"},{"skillId":"skill_0035","activePhase":"06","effectTarget":"05","effectValue":1,"synergyTarget":"13","explanation":"1VP × 基本戦力4以上のユニット"},{"skillId":"skill_0036","activePhase":"06","effectTarget":"05","effectValue":2,"synergyTarget":"07","explanation":"2VP × [技術]技術レベル"},{"skillId":"skill_0037","activePhase":"06","effectTarget":"05","effectValue":2,"synergyTarget":"08","explanation":"2VP × [信仰]信仰レベル"},{"skillId":"skill_0038","activePhase":"06","effectTarget":"05","effectValue":3,"synergyTarget":"07","explanation":"3VP × [技術]技術レベル"},{"skillId":"skill_0039","activePhase":"06","effectTarget":"05","effectValue":4,"synergyTarget":"","explanation":"4VP"},{"skillId":"skill_0040","activePhase":"07","effectTarget":"05","effectValue":null,"synergyTarget":"","explanation":"得点計算時、自分が金で獲得するVPを3倍にする"}],"bonusList":[{"division":"01","type":"01","effectTarget1":"05","effectValue1":5,"effectTarget2":"","effectValue2":null},{"division":"01","type":"02","effectTarget1":"02","effectValue1":2,"effectTarget2":"","effectValue2":null},{"division":"01","type":"03","effectTarget1":"03","effectValue1":2,"effectTarget2":"","effectValue2":null},{"division":"01","type":"04","effectTarget1":"01","effectValue1":3,"effectTarget2":"","effectValue2":null},{"division":"01","type":"05","effectTarget1":"02","effectValue1":2,"effectTarget2":"03","effectValue2":2},{"division":"01","type":"06","effectTarget1":"05","effectValue1":7,"effectTarget2":"","effectValue2":null},{"division":"02","type":"01","effectTarget1":"01","effectValue1":3,"effectTarget2":"","effectValue2":null},{"division":"02","type":"02","effectTarget1":"05","effectValue1":5,"effectTarget2":"","effectValue2":null},{"division":"02","type":"03","effectTarget1":"02","effectValue1":2,"effectTarget2":"","effectValue2":null},{"division":"02","type":"04","effectTarget1":"01","effectValue1":1,"effectTarget2":"05","effectValue2":3},{"division":"02","type":"05","effectTarget1":"03","effectValue1":2,"effectTarget2":"","effectValue2":null},{"division":"02","type":"06","effectTarget1":"05","effectValue1":9,"effectTarget2":"","effectValue2":null}]}'),ye=s(7851),Ce={name:"MmagnoliaGame",props:{msg:String},components:{CardPlace:ee,HandCard:oe,PhaseDialog:pe,WaitDialog:Ie},data(){return{snackbar:!1,trashFlg:!1,joinRoom:!1,playGame:!1,vpCanvas:null,warCanvas:null,socket:(0,ye.io)("http://localhost:3030"),selectedCard:{},deckCards:[],existCardList:[],playerNum:0,dialogMsg:"",addCards:[],bonusRatio:1,money:{one:{gold:1,num:25},three:{gold:3,num:15},six:{gold:6,num:6}},selectedImg:null,status:{money:5,tech:0,faith:0,force:0,vp:0},cardData:be,showFlg:!1,userName:"",roomId:"",message:"",room:{}}},created(){this.socket.on("connect",(()=>{console.log("connected")})),this.init()},computed:{otherPlayers(){return console.log("■computed"),console.log(this.room),console.log(this.room.users),this.room.users?this.room.users.filter((e=>e.name!==this.userName)):[]}},watch:{status:{handler:function(e){const t=this.room.users.find((e=>e.name===this.userName));t.status=e,this.socket.emit("updateStatus",this.roomId,this.userName,e)},deep:!0}},mounted(){this.socket.on("updateRoom",((e,t)=>{this.$refs.announceDialog.openDialog("入室に成功しました！！"),this.joinRoom=!0,this.playerNum=t,this.room=e,this.roomId=e.id,console.log("updateRoom:",this.room),console.log("参加人数:",t)})),this.socket.on("updateStatus",((e,t)=>{console.log("変更するユーザ情報:",t.name,t.status),this.room.users=this.room.users.filter((t=>t.name!==e)),this.room.users.push(t)})),this.socket.on("announceEnter",((e,t,s)=>{console.log("他プレイヤー入室：",e),this.$refs.announceDialog.openDialog(e+" さんが入室しました"),console.log("参加人数:",t),this.playerNum=t,ie().isEmpty(this.room)||(this.room=s)})),this.socket.on("notifyError",(e=>{this.message=e,this.snackbar=!0})),this.socket.on("notifyDisconnection",(e=>{this.message=e+" さんが退室しました",this.$refs.announceDialog.openDialog(e+" さんが入室しました")})),this.socket.on("announceStart",(()=>{this.playGame=!0,this.$refs.handCard._drawCard(),this.$refs.startDialog.openDialog("ゲームを開始します")})),this.socket.on("removeDeckCardsOthre",(e=>{this.removeDeck(e)})),this.socket.on("announceEndPhase",(e=>{console.log(e,"さんが配置を終了しました")})),this.socket.on("startRound",(()=>{console.log("★startRound"),this.$refs.waitDialog.closeDialog(),this.configPhase()})),this.socket.on("endWarPhase",(e=>{console.log("■■■■■■戦争■■■■■■■■"),console.log("順位:",e),console.log("vp獲得前:",this.status.vp);const t=this.getWarVp(e);this.status.vp+=t,console.log("vp獲得後:",this.status.vp),this.snackbar=!0,this.message="獲得VP:"+t,this.existCardList.forEach((e=>{this.addWarVp(this.cardData.skillList.find((t=>t.skillId===e.skillId1)),t),this.addWarVp(this.cardData.skillList.find((t=>t.skillId===e.skillId12)),t)})),console.log("vp追加獲得後:",this.status.vp)}))},methods:{createRoom(){this.socket.emit("create",this.userName,this.status)},enterRoom(){console.log("enterRoom"),this.socket.emit("enter",this.userName,this.roomId,this.status),this.message=""},gameStart(){this.socket.emit("gameStart",this.roomId)},init(){let e=1;be.unitList.forEach((t=>{for(let a=0;a<t.cardNum;a++)this.deckCards.push({serialNum:e,unitId:t.unitId,img:s(3422)("./"+t.unitId+".svg")}),e++}))},updateSelectedCard(e){this.selectedCard=e,this.trashFlg||this.$refs.cardPlace.highlight()},removeDeckCards(e){this.removeDeck(e),this.socket.emit("removeDeckCards",e)},removeDeck(e){e.forEach((e=>{this.deckCards.filter((t=>t.serialNum!==e.serialNum))}))},removeHnadCard(){this.$refs.handCard.removeHnadCard()},trashCard(){this.$refs.handCard.removeHnadCard()},endTrash(){console.log("カード捨て終わった"),this.trashFlg=!1,this.$refs.handCard.reloadCard(),this.$refs.cardPlace.highlight()},putPhase(){this.$refs.putPhaseDialog.openDialog("ドローフェーズです\r\nカードを捨てて設置してください"),this.trashFlg=!0},addExistCardList(e){const t=this.cardData.unitList;let s=t.find((t=>t.unitId===e.unitId));s={...s,posX:e.posX,posY:e.posY},this.addCards.push(s)},endPhase(){this.$refs.cardPlace.installCount=0,this.socket.emit("endConfigPhase",this.roomId),this.$refs.waitDialog.openDialog()},configPhase(){console.log("■■■■■■■配置■■■■■■■"),console.log("お金はらう前:",this.status.money),this.addCards.forEach((e=>{this.status.money-=e.cost})),1===this.addCards.length?this.status.money++:0===this.addCards.length&&(this.stasus.money+=2),console.log("お金はらった後:",this.status.money),this.existCardList=[...this.existCardList,...this.addCards],console.log("配置効果発動前:",JSON.stringify(this.status)),this.addCards.forEach((e=>{const t=this.cardData.skillList.find((t=>t.skillId===e.skillId1));this.addConfig(t);const s=this.cardData.skillList.find((t=>t.skillId===e.skillId2));this.addConfig(s)})),console.log("配置効果発動後:",JSON.stringify(this.status)),this.bonusPhase(),this.addCards=[],this.warPhase()},addConfig(e){if(!ie().isEmpty(e)&&e.activePhase===S.CONFIG){const t=ie().uniqBy(this.existCardList,"job");switch(e.effectTarget){case U.TECH:this.status.tech+=e.effectValue;break;case U.FAITH:this.status.faith+=e.effectValue;break;case U.VP:if(e.synergyTarget===$.FAITH_LEVEL)this.status.vp+=e.effectValue*this._getLevel(this.status.faith);else{const t=this.existCardList.filter((t=>t.kind===e.synergyTarget));this.status.vp+=e.effectValue*t.length}break;case U.MONEY:this.status.money+=t.length;break;case U.SPECIAL1:this.status.tech<this.status.faith?this.status.tech=this.status.faith:this.status.tech>this.status.faith&&(this.status.faith=this.status.tech);break;case U.SPECIAL2:this.bonusRatio=2;break}}},bonusPhase(){const e=[];this.addCards.forEach((t=>{const s=this.existCardList.filter((e=>e.posX===t.posX)),a=this.existCardList.filter((e=>e.posY===t.posY));3===s.filter((e=>e.kind===t.kind)).length?e.push(this.getBonus(G.KIND,t.kind)):3===s.filter((e=>e.job===t.job)).length&&e.push(this.getBonus(G.JOB,t.job)),3===a.filter((e=>e.kind===t.kind)).length?e.push(this.getBonus(G.KIND,t.kind)):3===a.filter((e=>e.job===t.job)).length&&e.push(this.getBonus(G.JOB,t.job))})),0!==e.length&&(console.log("■■■■■■ボーナス発動！！！！！■■■■■"),console.log("発動前:",JSON.stringify(this.status)),e.forEach((e=>{this.addBonus(e.effectTarget1,e.effectValue1),this.addBonus(e.effectTarget2,e.effectValue2)})),console.log("発動後:",JSON.stringify(this.status)))},getBonus(e,t){return be.bonusList.filter((t=>t.division===e)).find((e=>e.type===t))},addBonus(e,t){if(!ie().isEmpty(e))switch(e){case U.MONEY:this.status.money+=t*this.bonusRatio;break;case U.TECH:this.status.tech+=t*this.bonusRatio;break;case U.FAITH:this.status.faith+=t*this.bonusRatio;break;case U.VP:this.status.vp+=t*this.bonusRatio;break}},warPhase(){this.$refs.warPhaseDialog.openDialog("戦争フェーズです\r\n戦力を計算します");let e=0;const t=this._getFrontUnits();t.forEach((t=>{e+=t.force;const s=this.cardData.skillList.find((e=>e.skillId===t.skillId1));e+=this._addForce(s);const a=this.cardData.skillList.find((e=>e.skillId===t.skillId2));e+=this._addForce(a)})),this.status.force=e,console.log("warPhase呼び出し"),this.elvenArcher(t),this.socket.emit("warPhase",this.roomId,this.status,this.userName,this.existCardList)},_getFrontUnits(){let e=[];for(let t=0;t<5;t++){const s=this.existCardList.filter((e=>e.posX===t));if(0!==s.length){const t=Math.min(...s.map((e=>e.posY))),a=s.find((e=>e.posY===t));e.push(a)}}return e},_addForce(e){let t=0;if(!ie().isEmpty(e)&&e.activePhase===S.WAR)switch(e.synergyTarget){case $.TECH_LEVEL:t+=e.effectValue*this._getLevel(this.status.tech);break;case $.FAITH_LEVEL:t+=e.effectValue*this._getLevel(this.status.faith);break}return t},elvenArcher(e){const t=this.existCardList.filter((e=>e.unitId===K));if(!ie().isEmpty(t)){const s=e.filter((e=>e.unitId===K)),a=this.cardData.unitList.find((e=>e.unitId===K)).force;this.status.force+=a*(t.length-s.length)}},getWarVp(e){return B.find((e=>e.player===this.playerNum)).result.find((t=>t.rank===e)).vp},addWarVp(e,t){ie().isEmpty(e)||e.activePhase!==S.AFTER_WAR||(t>0&&e.effectTarget===U.GET_WAR_VP||0===t&&e.effectTarget===U.NOT_GET_WAR_VP)&&(this.status.vp+=e.effectValue)},developPhase(){console.log("■■■■■■■発展■■■■■■■"),this.$refs.developPhaseDialog.openDialog("発展フェーズです\r\n技術・信仰をupします"),console.log("発展前 技術:",this.status.tech,"信仰:",this.status.faith),this.existCardList.forEach((e=>{const t=this.cardData.skillList.find((t=>t.skillId===e.skillId1));this.addDevelop(t);const s=this.cardData.skillList.find((t=>t.skillId===e.skillId2));this.addDevelop(s)})),console.log("発展後 技術:",this.status.tech,"信仰:",this.status.faith)},addDevelop(e){if(!ie().isEmpty(e)&&e.activePhase===S.DEVELOP)switch(e.effectTarget){case U.TECH:this.status.tech+=e.effectValue;break;case U.FAITH:this.status.faith+=e.effectValue;break}},incomePhase(){console.log("■■■■■■■収入■■■■■■■"),this.$refs.incomePhaseDialog.openDialog("収入フェーズです\r\nお金が手に入ります");let e=3;this.existCardList.forEach((t=>{const s=this.cardData.skillList.find((e=>e.skillId===t.skillId1));e+=this.addIncome(s);const a=this.cardData.skillList.find((e=>e.skillId===t.skillId2));e+=this.addIncome(a)})),console.log("お金もらう前:",this.status.money),this.status.money+=e,console.log("お金もらった後:",this.status.money)},addIncome(e){return ie().isEmpty(e)||e.activePhase!==S.INCOM?0:ie().isEmpty(e.synergyTarget)||e.synergyTarget!==$.TECH_LEVEL?e.effectValue:e.effectValue*this._getLevel(this.status.tech)},vpPhase(){console.log("■■■■■■■VP■■■■■■■"),this.$refs.vpPhaseDialog.openDialog("VPフェーズです\r\nVPが手に入ります");let e=0;if(this.existCardList.forEach((t=>{const s=this.cardData.skillList.find((e=>e.skillId===t.skillId1));e+=this.addVP(s);const a=this.cardData.skillList.find((e=>e.skillId===t.skillId2));e+=this.addVP(a)})),console.log("vpもらう前:",this.status.vp),this.status.vp+=e,console.log("vpもらった後:",this.status.vp),this.status.vp>=40||this.existCardList.length>=9)return console.log("ゲーム終了"),this.$refs.announceDialog.openDialog("ゲーム終了です!!!!"),void this.socket.emit("endGame",this.roomId)},addVP(e){if(ie().isEmpty(e)||e.activePhase!==S.VP)return 0;{let t=0;const s=this.existCardList.filter((e=>e.cost<=3)),a=this.existCardList.filter((e=>e.cost>=4)),i=this.existCardList.filter((e=>e.force>=4));switch(e.synergyTarget){case $.TECH_LEVEL:t=e.effectValue*this._getLevel(this.status.tech);break;case $.FAITH_LEVEL:t=e.effectValue*this._getLevel(this.status.faith);break;case $.UNDER_3_COST:t=s.length;break;case $.UPPER_4_COST:t=a.length;break;case $.UPPER_4_FORCE:t=i.length;break;default:return e.effectValue}return t}},closeDialog(){this.$refs.handCard.reloadCard()},_getLevel(e){return 0===e?0:1<=e&&e<=2?1:3<=e&&e<=6?2:7<=e&&e<=14?3:e<=15?4:void 0}}};const Pe=(0,q.Z)(Ce,[["render",H],["__scopeId","data-v-d0c6ef10"]]);var xe=Pe,Te={name:"App",components:{Magnolia:xe},data:()=>({})};const Ve=(0,q.Z)(Te,[["render",o]]);var we=Ve,De=(s(9773),s(8727)),Ee=(0,De.Rd)();async function Ne(){const e=await s.e(461).then(s.t.bind(s,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}Ne(),(0,a.ri)(we).use(Ee).mount("#app")},3422:function(e,t,s){var a={"./unit_0001.svg":6695,"./unit_0002.svg":24,"./unit_0003.svg":6596,"./unit_0004.svg":7046,"./unit_0005.svg":3872,"./unit_0006.svg":9922,"./unit_0007.svg":2330,"./unit_0008.svg":5699,"./unit_0009.svg":2194,"./unit_0010.svg":5020,"./unit_0011.svg":720,"./unit_0012.svg":8034,"./unit_0013.svg":9248,"./unit_0014.svg":8348,"./unit_0015.svg":9534,"./unit_0016.svg":9923,"./unit_0017.svg":454,"./unit_0018.svg":560,"./unit_0019.svg":294,"./unit_0020.svg":5089,"./unit_0021.svg":9359,"./unit_0022.svg":8938,"./unit_0023.svg":5474,"./unit_0024.svg":1680,"./unit_0025.svg":1204,"./unit_0026.svg":8196,"./unit_0027.svg":1011,"./unit_0028.svg":9636,"./unit_0029.svg":6985,"./unit_0030.svg":2118,"./unit_0031.svg":867,"./unit_0032.svg":5859,"./unit_0033.svg":5710,"./unit_0034.svg":7578,"./unit_0035.svg":8514,"./unit_0036.svg":4651,"./unit_0037.svg":9792,"./unit_0038.svg":8409,"./unit_0039.svg":5994,"./unit_0040.svg":1039,"./unit_0041.svg":8107};function i(e){var t=l(e);return s(t)}function l(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=l,e.exports=i,i.id=3422},6695:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0001.a2da5a0b.svg"},24:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0002.f82bd1e4.svg"},6596:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0003.ab8de467.svg"},7046:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0004.22aaf724.svg"},3872:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0005.206f0e63.svg"},9922:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0006.77776e1d.svg"},2330:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0007.f9b988ef.svg"},5699:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0008.a3434e16.svg"},2194:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0009.8f0450f6.svg"},5020:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0010.9422db91.svg"},720:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0011.6bf609b7.svg"},8034:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0012.e00fac57.svg"},9248:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0013.acf915cb.svg"},8348:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0014.7a3f5dc4.svg"},9534:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0015.0d7e74ca.svg"},9923:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0016.ebba1501.svg"},454:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0017.20eb87ae.svg"},560:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0018.4797affe.svg"},294:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0019.e7a5de58.svg"},5089:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0020.8a15e5b2.svg"},9359:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0021.96d9241c.svg"},8938:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0022.7f354bbb.svg"},5474:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0023.1d291e3e.svg"},1680:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0024.455f042e.svg"},1204:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0025.8ce6db2e.svg"},8196:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0026.e0dcf1c4.svg"},1011:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0027.b0f305c4.svg"},9636:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0028.1975dcae.svg"},6985:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0029.2364f4b3.svg"},2118:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0030.cd64defa.svg"},867:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0031.72992521.svg"},5859:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0032.09b879de.svg"},5710:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0033.7959ab25.svg"},7578:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0034.3a9d9af5.svg"},8514:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0035.6b4daef8.svg"},4651:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0036.8912d742.svg"},9792:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0037.6920c500.svg"},8409:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0038.1cd3c765.svg"},5994:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0039.e9345c7b.svg"},1039:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0040.7c091ab5.svg"},8107:function(e,t,s){"use strict";e.exports=s.p+"img/unit_0041.037fdda6.svg"},5269:function(){},6759:function(){},6272:function(){}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(l.exports,l,l.exports,s),l.loaded=!0,l.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,l){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],l=e[d][2];for(var o=!0,r=0;r<a.length;r++)(!1&l||n>=l)&&Object.keys(s.O).every((function(e){return s.O[e](a[r])}))?a.splice(r--,1):(o=!1,l<n&&(n=l));if(o){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,i,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};s.t=function(a,i){if(1&i&&(a=this(a)),8&i)return a;if("object"===typeof a&&a){if(4&i&&a.__esModule)return a;if(16&i&&"function"===typeof a.then)return a}var l=Object.create(null);s.r(l);var n={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&a;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((function(e){n[e]=function(){return a[e]}}));return n["default"]=function(){return a},s.d(l,n),l}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,a){return s.f[a](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/webfontloader.391ddaf9.js"}}(),function(){s.miniCssF=function(e){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="magnolia-practice-cli:";s.l=function(a,i,l,n){if(e[a])e[a].push(i);else{var o,r;if(void 0!==l)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+l){o=u;break}}o||(r=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",t+l),o.src=a),e[a]=[i];var f=function(t,s){o.onerror=o.onload=null,clearTimeout(h);var i=e[a];if(delete e[a],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((function(e){return e(s)})),t)return t(s)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),r&&document.head.appendChild(o)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p=""}(),function(){var e={143:0};s.f.j=function(t,a){var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var l=new Promise((function(s,a){i=e[t]=[s,a]}));a.push(i[2]=l);var n=s.p+s.u(t),o=new Error,r=function(a){if(s.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var l=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+l+": "+n+")",o.name="ChunkLoadError",o.type=l,o.request=n,i[1](o)}};s.l(n,r,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,l,n=a[0],o=a[1],r=a[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(r)var d=r(s)}for(t&&t(a);c<n.length;c++)l=n[c],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(d)},a=self["webpackChunkmagnolia_practice_cli"]=self["webpackChunkmagnolia_practice_cli"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(7232)}));a=s.O(a)})();
//# sourceMappingURL=app.9338a43b.js.map